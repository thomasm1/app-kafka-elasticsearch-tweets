system.environment=mysql

### PROPERTY SOURCE
app.mapl.server.port=8888
app.mapl.client.user=${AWS_MYSQL_USER}
app.mapl.client.password=${AWS_MYSQL_PASSWORD}
app.mapl.client.port=3306
app.mapl.client.server=${AWS_MYSQL_URL}
app.mapl.client.database=dashboarddb
app.mapl.client.dbtype=mysql
app.mapl.client.generate-ddl=false
app.mapl.client.hibernate.ddl-auto=none
app.mapl.client.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect
app.mapl.client.driver=com.mysql.cj.jdbc.Driver
app.mapl.client.sql.init.mode=never
app.mapl.client.management.endpoint.metrics.enabled=true
app.mapl.client.mail.host=smtp.gmail.com
app.mapl.client.mail.port=587
app.mapl.client.mail.username=${EMAIL_USERNAME}
app.mapl.client.mail.password=${EMAIL_PASSWORD}
app.mapl.client.mail.smtp.auth=true

spring.data.jpa.repositories.bootstrap-mode=default
spring.data.jpa.repositories.enabled=true

### Security
security.basic.enabled=false
security.basic.path=/actuator


#app.jwt-secret=daf66 55dbb
#app-jwt-expiration-milliseconds=604800000

### Cloud Config
spring.cloud.config.enabled=${app.mapl.client.cloud.config.enabled:false}
#spring.config.import=optional:configserver:http://localhost:8071
#management.datadog.metrics.export.apiKey=123

# SQL
spring.sql.init.mode=${app.mapl.client.sql.init.mode}
spring.sql.init.schema-locations=classpath:schema-mysql.sql
spring.sql.init.data-locations=classpath:data-mysql.sql
spring.sql.init.continue-on-error=true

# Datasource
spring.datasource.url=jdbc:${app.mapl.client.dbtype}://${app.mapl.client.database}.${app.mapl.client.server}:${app.mapl.client.port}?createDatabaseIfNotExist=true&allowPublicKeyRetrieval=true&useSSL=false&useUnicode=true&characterEncoding=UTF-8&serverTimezone=UTC
#spring.datasource.url=jdbc:mysql://localhost:3306/dashboarddb?createDatabaseIfNotExist=true&allowPublicKeyRetrieval=true&useSSL=false&useUnicode=true&characterEncoding=UTF-8&serverTimezone=UTC
spring.datasource.username=${app.mapl.client.user}
spring.datasource.password=${app.mapl.client.password}
spring.datasource.driver-class-name=${app.mapl.client.driver}

## JPA
spring.jpa.generate-ddl=${app.mapl.client.generate-ddl}
spring.jpa.hibernate.ddl-auto=${app.mapl.client.hibernate.ddl-auto}
spring.jpa.database=${app.mapl.client.dbtype}
spring.jpa.database-platform=${app.mapl.client.hibernate.dialect}
spring.jpa.open-in-view=false
spring.jpa.show-sql=true

spring.jpa.properties.hibernate.dialect=${app.mapl.client.hibernate.dialect}
spring.jpa.properties.hibernate.use_sql_comments=true
spring.jpa.properties.hibernate.globally_quoted_identifiers=true
spring.jpa.properties.hibernate.connection.characterEncoding=UTF-8
spring.jpa.properties.hibernate.connection.CharSet=UTF-8
spring.jpa.properties.hibernate.useUnicode=true
spring.jpa.properties.hibernate.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true
########## Log jpa slow queries ##########
spring.jpa.properties.hibernate.session.events.log.LOG_QUERIES_SLOWER_THAN_MS=1
spring.jpa.properties.hibernate.generate_statistics=true
spring.jpa.properties.hibernate.session.events.log=org.hibernate.event.service.spi.EventListenerRegistry
spring.jpa.properties.jakarta.persistence.validation.mode=none
### CACHE
spring.jpa.properties.jakarta.persistence.sharedCache.mode=ENABLE_SELECTIVE
spring.jpa.properties.jakarta.persistence.cache.storeMode=REFRESH
spring.jpa.properties.jakarta.persistence.cache.retrieveMode=BYPASS
## H2
spring.h2.console.enabled=false

## MIGRATIONS
spring.flyway.enabled=false

## ACTUATOR ##health,info,env,metrics,loggers,auditevents,httptrace
spring.data.rest.base-path=/rest/
spring.data.rest.default-page-size=10
spring.data.rest.max-page-size=100
spring.data.rest.page-param-name=page
spring.data.rest.limit-param-name=limit

management.endpoints.web.exposure.include= *
management.endpoint.metrics.enabled=${app.mapl.client.management.endpoint.metrics.enabled:true}
management.info.env.enabled=${app.mapl.client.management.endpoint.metrics.enabled:true}
management.endpoint.health.show-details=always
management.endpoint.shutdown.enabled=true
management.endpoint.health.enabled=true
########## Log springframework   ##########
logging.level.org.springframework.web=INFO
logging.level.org.springframework.security=INFO
logging.level.org.springframework.security.web=OFF
logging.level.org.springframework.security.authentication=OFF
logging.level.org.springframework=info
#Show bind values
logging.level.org.hibernate.orm.jdbc.bind=trace
#pre spring boot 3.0.2: logging.level.org.hibernate.type.descriptor.sql=trace
########## Log hibernate SQL statements ##########
logging.level.org.hibernate.cache=info
logging.level.org.hibernate.stat=info
########## Log app/class level ##########
logging.level.com.mapl.app=info
logging.level.com.mapl.app.controller=info

# UI
spring.mvc.format.date=yyyy-MM-dd
spring.thymeleaf.cache=false
spring.thymeleaf.enabled=true
spring.mvc.view.suffix=.jsp
# File System
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size= 10MB
spring.servlet.multipart.max-request-size= 10MB
# Email
app.mail.enabled=false
spring.mail.host=${app.mapl.client.mail.host}
spring.mail.port=${app.mapl.client.mail.port}
spring.mail.username=${app.mapl.client.mail.username}
spring.mail.password=${app.mapl.client.mail.password}
spring.mail.properties.mail.smtp.auth=${app.mapl.client.mail.smtp.auth}
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=3000
spring.mail.properties.mail.smtp.writetimeout=5000
spring.mail.properties.mail.smtp.ssl.trust=smtp.gmail.com
spring.mail.properties.mail.mime.charset=UTF-8

#spring.mvc.view.prefix=/view/jsp/
server.port=${app.mapl.server.port}
server.servlet.context-path=/v1
server.context-path=/¸
server.error.path=/user/error
server.error.whitelabel.enabled=false
server.error.include-stacktrace=always
server.error.include-message=always
server.error.include-binding-errors=always
server.error.include-exception=true
server.error.include-path-errors=always
server.error.include-validation-errors=always

### Transactions
#
dashboard-service.url=https://dashboard.mapl.app
dashboard-service.username==${user-service.username}
dashboard-service.key=dashboard-key

user-service.url=https://user.mapl.app
user-service.username=thomas
user-service.key=${dashboard-service.key}

transaction-service.username=${user-service.username}
transaction-service.url=https://transaction.mapl.app
transaction-service.key=${dashboard-service.key}${user-service.username}
